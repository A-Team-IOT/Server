extends ../mixins/layout

block content
  h1 Test Input
  p Send data to the defined listener

  div(id="future")
    form(id="chat_form")
      label listener: 
      br
      input(id="listener_input" type="text" style="width:800px" value="testData")
      br
      label data: 
      br
      input(id="chat_input" type="text" style="width:800px" value="{'msg_type':'onPropChange', 'id':'dev33', 'componentId': '1', 'propName': 'text', 'propValue': 'new text'}")
      input(type="submit" value="Send")

  button(id="register") Register
  
  div(id="log")

  script(type='text/javascript').
    var socket = io.connect();

    socket.on('connect', function(data) {
      console.log("client connected");
    })

    socket.on('dataToTest', function(data) {
        $('#log').append(""+ JSON.stringify(data) + "<br/>");
    });

    $('form').submit(function(e){
      e.preventDefault();
      console.log($("#listener_input").val());
      socket.emit($("#listener_input").val(), $('#chat_input').val());
    });

    $("#register").on('click', function(){
      socket.emit('register', "Test Input Register Event");
    });
